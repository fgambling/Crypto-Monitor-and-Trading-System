{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.220.0"},"children":{"CryptoMonitorStack":{"id":"CryptoMonitorStack","path":"CryptoMonitorStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.220.0"},"children":{"PostsTable":{"id":"PostsTable","path":"CryptoMonitorStack/PostsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.220.0","metadata":[]}},"SignalsTable":{"id":"SignalsTable","path":"CryptoMonitorStack/SignalsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.220.0","metadata":[]}},"ExtractQueue":{"id":"ExtractQueue","path":"CryptoMonitorStack/ExtractQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/ExtractQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"ExtractQueue","visibilityTimeout":60}}}}},"IngestFunction":{"id":"IngestFunction","path":"CryptoMonitorStack/IngestFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.220.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CryptoMonitorStack/IngestFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CryptoMonitorStack/IngestFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/IngestFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CryptoMonitorStack/IngestFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/IngestFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:ap-southeast-2:",{"Ref":"AWS::AccountId"},":table/Posts"]]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ExtractQueue83C1B7E4","Arn"]}}],"Version":"2012-10-17"},"policyName":"IngestFunctionServiceRoleDefaultPolicy8EB1E4A7","roles":[{"Ref":"IngestFunctionServiceRole55EB4427"}]}}}}}}},"Code":{"id":"Code","path":"CryptoMonitorStack/IngestFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.220.0"},"children":{"Stage":{"id":"Stage","path":"CryptoMonitorStack/IngestFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.220.0"}},"AssetBucket":{"id":"AssetBucket","path":"CryptoMonitorStack/IngestFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.220.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/IngestFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-ap-southeast-2"},"s3Key":"b0fadb9fada815228df4373c60b3366875a1568ce298a17bbaad77fbe2333d09.zip"},"environment":{"variables":{"TABLE_POSTS":"Posts","TABLE_SIGNALS":"Signals","QUEUE_URL":{"Ref":"ExtractQueue83C1B7E4"},"MARKET_CAP_MIN":"500000","VOLUME_MIN":"100000"}},"handler":"index.handler","role":{"Fn::GetAtt":["IngestFunctionServiceRole55EB4427","Arn"]},"runtime":"nodejs20.x","timeout":10}}}}},"ExtractFunction":{"id":"ExtractFunction","path":"CryptoMonitorStack/ExtractFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.220.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CryptoMonitorStack/ExtractFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CryptoMonitorStack/ExtractFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/ExtractFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CryptoMonitorStack/ExtractFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/ExtractFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":dynamodb:ap-southeast-2:",{"Ref":"AWS::AccountId"},":table/Signals"]]},{"Ref":"AWS::NoValue"}]},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ExtractQueue83C1B7E4","Arn"]}}],"Version":"2012-10-17"},"policyName":"ExtractFunctionServiceRoleDefaultPolicy39BDF15D","roles":[{"Ref":"ExtractFunctionServiceRole4660E294"}]}}}}}}},"Code":{"id":"Code","path":"CryptoMonitorStack/ExtractFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.220.0"},"children":{"Stage":{"id":"Stage","path":"CryptoMonitorStack/ExtractFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.220.0"}},"AssetBucket":{"id":"AssetBucket","path":"CryptoMonitorStack/ExtractFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.220.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/ExtractFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-ap-southeast-2"},"s3Key":"7c7f6861d2b83d108b52a91907d9de9faf2187503777bf067a2a5f7742d82068.zip"},"environment":{"variables":{"TABLE_POSTS":"Posts","TABLE_SIGNALS":"Signals","QUEUE_URL":{"Ref":"ExtractQueue83C1B7E4"},"MARKET_CAP_MIN":"500000","VOLUME_MIN":"100000"}},"handler":"index.handler","role":{"Fn::GetAtt":["ExtractFunctionServiceRole4660E294","Arn"]},"runtime":"nodejs20.x","timeout":30}}},"SqsEventSource:CryptoMonitorStackExtractQueue97DC5267":{"id":"SqsEventSource:CryptoMonitorStackExtractQueue97DC5267","path":"CryptoMonitorStack/ExtractFunction/SqsEventSource:CryptoMonitorStackExtractQueue97DC5267","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/ExtractFunction/SqsEventSource:CryptoMonitorStackExtractQueue97DC5267/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"eventSourceArn":{"Fn::GetAtt":["ExtractQueue83C1B7E4","Arn"]},"functionName":{"Ref":"ExtractFunctionABD5F5B5"}}}}}}}},"CryptoMonitorApi":{"id":"CryptoMonitorApi","path":"CryptoMonitorStack/CryptoMonitorApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"CryptoMonitor"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"CryptoMonitorStack/CryptoMonitorApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.220.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"CryptoMonitorStack/CryptoMonitorApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.220.0","metadata":[]}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"CryptoMonitorStack/CryptoMonitorApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["CryptoMonitorApiCloudWatchRoleE0F68B4A","Arn"]}}}},"Deployment":{"id":"Deployment","path":"CryptoMonitorStack/CryptoMonitorApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"CryptoMonitorApi0DB8F5B2"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"CryptoMonitorStack/CryptoMonitorApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"CryptoMonitorApiDeployment7B2F7B31970e3985dbaaba7ed1b8464846f5e256"},"restApiId":{"Ref":"CryptoMonitorApi0DB8F5B2"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"CryptoMonitorStack/CryptoMonitorApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"Default":{"id":"Default","path":"CryptoMonitorStack/CryptoMonitorApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.220.0","metadata":[]},"children":{"ingest":{"id":"ingest","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.220.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["CryptoMonitorApi0DB8F5B2","RootResourceId"]},"pathPart":"ingest","restApiId":{"Ref":"CryptoMonitorApi0DB8F5B2"}}}},"POST":{"id":"POST","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.220.0","metadata":[]},"children":{"ApiPermission.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest":{"id":"ApiPermission.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest/POST/ApiPermission.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["IngestFunction4B2F2EB2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-southeast-2:",{"Ref":"AWS::AccountId"},":",{"Ref":"CryptoMonitorApi0DB8F5B2"},"/",{"Ref":"CryptoMonitorApiDeploymentStageprod1375723F"},"/POST/ingest"]]}}}},"ApiPermission.Test.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest":{"id":"ApiPermission.Test.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest/POST/ApiPermission.Test.CryptoMonitorStackCryptoMonitorApi18B4E178.POST..ingest","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["IngestFunction4B2F2EB2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:ap-southeast-2:",{"Ref":"AWS::AccountId"},":",{"Ref":"CryptoMonitorApi0DB8F5B2"},"/test-invoke-stage/POST/ingest"]]}}}},"Resource":{"id":"Resource","path":"CryptoMonitorStack/CryptoMonitorApi/Default/ingest/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.220.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["IngestFunction4B2F2EB2","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"CryptoMonitorApiingestDB74D2C8"},"restApiId":{"Ref":"CryptoMonitorApi0DB8F5B2"}}}}}}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"CryptoMonitorStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"ExtractQueueUrl":{"id":"ExtractQueueUrl","path":"CryptoMonitorStack/ExtractQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.220.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CryptoMonitorStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CryptoMonitorStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.220.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CryptoMonitorStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.220.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CryptoMonitorStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.220.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}